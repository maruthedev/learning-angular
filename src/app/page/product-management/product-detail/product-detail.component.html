<h1 class="title">{{"global.title.edit" | translate: {"item": "PRODUCT"} }}</h1>
<form *ngIf="productForm && inputProduct().id != ''"
    [formGroup]="productForm"
    class="product-form">
    <div class="input-group">
        <input class="form-control"
            type="hidden"
            name="id"
            formControlName="id"
            [(ngModel)]="inputProduct().id" />
    </div>
    <div>
        <label appRequiredField>{{"product_form.name" | translate}}</label>
        <input class="form-control"
            type="text"
            name="name"
            formControlName="name"
            autofocus
            [(ngModel)]="inputProduct().name" />
    </div>
    <div>
        <label appRequiredField>{{"product_form.price" | translate}}</label>
        <input class="form-control"
            #priceElement
            type="number"
            name="price"
            formControlName="price"
            appCurrencyTransform
            [activeProduct]="inputProduct()"
            [(ngModel)]="inputProduct().price" />
    </div>
    <div>
        <label>{{"product_form.image" | translate}}</label>
        <input class="form-control"
            type="hidden"
            name="image_url"
            formControlName="image_url"
            [(ngModel)]="inputProduct().image_url" />
        <input class="form-control"
            type="file"
            #fileInput
            id="imageHolder"
            (change)="onFileSelected($event)"
            style="display: none;" />
        <div style="display: flex;">
            <label for="imageHolder"
                for="imageHolder"
                class="btn btn-primary">{{"button.choose_image" | translate}}</label>
            <button class="btn btn-danger"
                type="button"
                *ngIf="previewFileUrl && uploadFile"
                (click)="clearImage()">{{"button.remove_image" | translate}}</button>
        </div>
        <div>
            <img [src]="previewFileUrl"
                width="300px"
                height="300px" />
        </div>
    </div>
    <div>
        <input type="checkbox"
            formControlName="is_discount_available" />
        <label for="is_discount_available">{{"product_form.is_discount_available" | translate}}</label>
    </div>
    <div class="action dropdown"
        *ngIf="currentOperatorRole !== 'CLIENT'">
        <button class="btn btn-primary"
            type="button"
            data-bs-toggle="dropdown"
            aria-expanded="false">
            {{"button.action" | translate}}
        </button>
        <ul class="dropdown-menu">
            <li>
                <button type="button"
                    class="dropdown-item text-primary"
                    (click)="update()">
                    {{"button.update" | translate}}
                </button>
            </li>
            <li>
                <button type="button"
                    class="dropdown-item text-danger"
                    (click)="delete()">
                    {{"button.delete" | translate}}
                </button>
            </li>
        </ul>
    </div>
</form>